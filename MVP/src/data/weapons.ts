/**
 * Weapons Database - Parsed from Weapons_Complete.csv
 *
 * Categories:
 * - Melee (Regular & Skill)
 * - Ranged (Firearms)
 * - Thrown
 * - Special (Flamethrower, Rocket, etc.)
 * - Energy Weapons
 * - Grenades
 */

import { Weapon, WeaponCategory, COST_VALUES, CostLevel, DamageMode } from './equipmentTypes';

// Helper to determine stun capability based on weapon properties
function getStunProperties(category: string, damageSubType: string, name: string): {
  stunCapable: boolean;
  defaultMode: DamageMode;
  alwaysLethal?: boolean;
  alwaysNonLethal?: boolean;
} {
  // Edged weapons are always lethal
  if (damageSubType === 'EDGED_MELEE' || damageSubType === 'PIERCING_MELEE') {
    return { stunCapable: false, defaultMode: 'kill', alwaysLethal: true };
  }

  // Firearms are always lethal
  if (damageSubType === 'GUNFIRE' || damageSubType === 'BUCKSHOT' || damageSubType === 'SLUG') {
    return { stunCapable: false, defaultMode: 'kill', alwaysLethal: true };
  }

  // Explosions are always lethal
  if (damageSubType === 'EXPLOSION' || damageSubType === 'SHRAPNEL' || damageSubType === 'DISINTEGRATION') {
    return { stunCapable: false, defaultMode: 'kill', alwaysLethal: true };
  }

  // Non-lethal weapons
  if (damageSubType === 'STUN' || damageSubType === 'FLASH' || damageSubType === 'ENTANGLE' ||
      damageSubType === 'SMOKE' || damageSubType === 'EMP') {
    return { stunCapable: false, defaultMode: 'stun', alwaysNonLethal: true };
  }

  // Taser/Net gun
  if (name.toLowerCase().includes('taser') || name.toLowerCase().includes('net')) {
    return { stunCapable: false, defaultMode: 'stun', alwaysNonLethal: true };
  }

  // Blunt melee weapons can toggle (default stun)
  if (damageSubType === 'SMASHING_MELEE') {
    return { stunCapable: true, defaultMode: 'stun' };
  }

  // Energy weapons can toggle (default kill)
  if (category === 'Energy_Weapons') {
    return { stunCapable: true, defaultMode: 'kill' };
  }

  // Concussive damage can toggle
  if (damageSubType === 'CONCUSSIVE') {
    return { stunCapable: true, defaultMode: 'stun' };
  }

  // Gas grenades can toggle
  if (damageSubType === 'GAS') {
    return { stunCapable: true, defaultMode: 'stun' };
  }

  // Default: lethal, no toggle
  return { stunCapable: false, defaultMode: 'kill', alwaysLethal: true };
}

// Helper to parse accuracy CS from string like "+1CS" or "-2CS"
function parseAccuracyCS(str: string): number {
  if (!str || str === '+0CS') return 0;
  const match = str.match(/([+-]?\d+)/);
  return match ? parseInt(match[1]) : 0;
}

// Helper to calculate cost value
function getCostValue(level: CostLevel): number {
  return COST_VALUES[level] || 0;
}

// Weapon emoji mapping
const WEAPON_EMOJIS: Record<string, string> = {
  // Melee
  'Knife': 'üî™',
  'Lead_Pipe': 'üîß',
  'Club': 'üèè',
  'Brass_Knuckles': 'üëä',
  'Baseball_Bat': '‚öæ',
  'Machete': 'üó°Ô∏è',
  'Katana': '‚öîÔ∏è',
  'Battle_Staff': 'ü•¢',
  'Nunchaku': 'ü•ã',
  'Tonfa': 'üõ°Ô∏è',
  'Spear': 'üî±',
  'Axe': 'ü™ì',
  'Sword': '‚öîÔ∏è',
  'Dagger': 'üó°Ô∏è',
  'Hammer_War': 'üî®',

  // Ranged
  'Pistol': 'üî´',
  'Pistol_Light': 'üî´',
  'Pistol_Standard': 'üî´',
  'Pistol_Heavy': 'üî´',
  'Revolver': 'üî´',
  'SMG': 'üî´',
  'Shotgun': 'üí•',
  'Shotgun_Pump': 'üí•',
  'Shotgun_Auto': 'üí•',
  'Shotgun_Slug': 'üí•',
  'Assault_Rifle': 'üéØ',
  'Battle_Rifle': 'üéØ',
  'Sniper_Rifle': 'üéØ',
  'Anti_Materiel_Rifle': 'üíÄ',
  'Machine_Gun': 'üî´',
  'Minigun': '‚ò†Ô∏è',

  // Thrown
  'Throwing_Knife': 'üó°Ô∏è',
  'Throwing_Star': '‚≠ê',
  'Javelin': 'üèπ',
  'Rock': 'ü™®',
  'Brick': 'üß±',

  // Special
  'Bow_Compound': 'üèπ',
  'Crossbow': 'üèπ',
  'Flamethrower': 'üî•',
  'Rocket_Launcher': 'üöÄ',
  'Grenade_Launcher': 'üí£',
  'Taser': '‚ö°',
  'Net_Gun': 'üï∏Ô∏è',

  // Energy
  'Laser_Rifle': '‚ö°',
  'Plasma_Rifle': 'üî•',
  'Thermal_Rifle': 'üå°Ô∏è',
  'Ice_Rifle': '‚ùÑÔ∏è',
  'Energy_Rifle': '‚ö°',
  'Electric_Rifle': '‚ö°',
  'Sonic_Rifle': 'üì¢',
  'Pulse_Rifle': 'üí´',
  'Disruptor': '‚ò¢Ô∏è',
  'Stun_Rifle': '‚ö°',

  // Grenades
  'Combat_Grenade': 'üí£',
  'Sticky_Grenade': 'üí£',
  'Flash_Grenade': 'üí°',
  'Stun_Grenade': 'üí´',
  'Shrapnel_Grenade': 'üí£',
  'Smoke_Grenade': 'üí®',
  'Incendiary_Grenade': 'üî•',
  'Gas_Grenade': '‚ò†Ô∏è',
  'EMP_Grenade': '‚ö°',
  'Plasma_Grenade': 'üî•',
};

function getWeaponEmoji(name: string): string {
  // Try exact match first
  if (WEAPON_EMOJIS[name]) return WEAPON_EMOJIS[name];

  // Try partial match
  for (const [key, emoji] of Object.entries(WEAPON_EMOJIS)) {
    if (name.includes(key) || key.includes(name.replace(/_/g, ' '))) {
      return emoji;
    }
  }

  // Default by category keywords
  if (name.toLowerCase().includes('pistol')) return 'üî´';
  if (name.toLowerCase().includes('rifle')) return 'üéØ';
  if (name.toLowerCase().includes('shotgun')) return 'üí•';
  if (name.toLowerCase().includes('knife') || name.toLowerCase().includes('blade')) return 'üî™';
  if (name.toLowerCase().includes('grenade')) return 'üí£';
  if (name.toLowerCase().includes('laser') || name.toLowerCase().includes('energy')) return '‚ö°';

  return 'üî´'; // Default
}

// ==================== MELEE WEAPONS ====================

export const MELEE_WEAPONS: Weapon[] = [
  {
    id: 'MEL_001',
    name: 'Knife',
    category: 'Melee_Regular',
    baseDamage: 10,
    damageType: 'PHYSICAL',
    damageSubType: 'EDGED_MELEE',
    attackSpeed: 1.0,
    range: 1,
    accuracyCS: 0,
    penetrationMult: 0.5,
    skillRequired: 'None',
    strRequired: 0,
    specialEffects: ['Easy to conceal', 'Fast draw/sheathe'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'Common cheap weapon for low STR characters',
    emoji: 'üî™',
  },
  {
    id: 'MEL_002',
    name: 'Lead Pipe',
    category: 'Melee_Regular',
    baseDamage: 5,
    damageType: 'PHYSICAL',
    damageSubType: 'SMASHING_MELEE',
    attackSpeed: 2.0,
    range: 2,
    accuracyCS: 0,
    penetrationMult: 0.25,
    skillRequired: 'None',
    strRequired: 0,
    specialEffects: ['Damage adds STR bonus'],
    costLevel: 'Free',
    costValue: 0,
    availability: 'Common',
    notes: 'Most common improvised melee',
    emoji: 'üîß',
  },
  {
    id: 'MEL_003',
    name: 'Club',
    category: 'Melee_Regular',
    baseDamage: 8,
    damageType: 'PHYSICAL',
    damageSubType: 'SMASHING_MELEE',
    attackSpeed: 1.5,
    range: 1,
    accuracyCS: 0,
    penetrationMult: 0.25,
    skillRequired: 'None',
    strRequired: 0,
    specialEffects: ['Damage adds STR bonus'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'Basic bludgeon',
    emoji: 'üèè',
  },
  {
    id: 'MEL_004',
    name: 'Brass Knuckles',
    category: 'Melee_Regular',
    baseDamage: 5,
    damageType: 'PHYSICAL',
    damageSubType: 'SMASHING_MELEE',
    attackSpeed: 0.8,
    range: 1,
    accuracyCS: 1,
    penetrationMult: 0.25,
    skillRequired: 'None',
    strRequired: 0,
    specialEffects: ['+5 to unarmed damage', 'Concealed'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Restricted',
    notes: 'Illegal in many jurisdictions',
    emoji: 'üëä',
  },
  {
    id: 'MEL_005',
    name: 'Baseball Bat',
    category: 'Melee_Regular',
    baseDamage: 12,
    damageType: 'PHYSICAL',
    damageSubType: 'SMASHING_MELEE',
    attackSpeed: 1.8,
    range: 2,
    accuracyCS: 0,
    penetrationMult: 0.5,
    skillRequired: 'None',
    strRequired: 10,
    specialEffects: ['Damage adds STR bonus', 'Chance to knockback'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'Good reach and damage',
    emoji: '‚öæ',
  },
  {
    id: 'MEL_006',
    name: 'Machete',
    category: 'Melee_Regular',
    baseDamage: 12,
    damageType: 'PHYSICAL',
    damageSubType: 'EDGED_MELEE',
    attackSpeed: 1.2,
    range: 1,
    accuracyCS: 0,
    penetrationMult: 0.75,
    skillRequired: 'None',
    strRequired: 0,
    specialEffects: ['Can cause bleeding'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'Utility and combat use',
    emoji: 'üó°Ô∏è',
  },
  {
    id: 'MEL_007',
    name: 'Katana',
    category: 'Melee_Skill',
    baseDamage: 15,
    damageType: 'PHYSICAL',
    damageSubType: 'EDGED_MELEE',
    attackSpeed: 1.5,
    range: 2,
    accuracyCS: 0,
    penetrationMult: 1.0,
    skillRequired: 'Katana',
    strRequired: 0,
    specialEffects: ['Critical hits cause bleeding', 'Dismemberment on Major'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Specialized',
    investigationBonus: '+2CS cultural (Asia)',
    notes: 'Expensive weapon requiring specialized training',
    emoji: '‚öîÔ∏è',
  },
  {
    id: 'MEL_008',
    name: 'Battle Staff',
    category: 'Melee_Skill',
    baseDamage: 8,
    damageType: 'PHYSICAL',
    damageSubType: 'SMASHING_MELEE',
    attackSpeed: 1.5,
    range: 3,
    accuracyCS: 0,
    penetrationMult: 0.5,
    skillRequired: 'Staff',
    strRequired: 0,
    specialEffects: ['STR bonus', 'Can hit adjacent enemies'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Common',
    notes: 'Good reach; area potential',
    emoji: 'ü•¢',
  },
  {
    id: 'MEL_009',
    name: 'Nunchaku',
    category: 'Melee_Skill',
    baseDamage: 10,
    damageType: 'PHYSICAL',
    damageSubType: 'SMASHING_MELEE',
    attackSpeed: 1.0,
    range: 1,
    accuracyCS: 1,
    penetrationMult: 0.5,
    skillRequired: 'Martial_Arts',
    strRequired: 0,
    disarmBonus: 25,  // Good for disarming
    specialEffects: ['Fast attacks', 'Can disarm'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Specialized',
    notes: 'Requires martial arts training',
    emoji: 'ü•ã',
  },
  {
    id: 'MEL_010',
    name: 'Tonfa',
    category: 'Melee_Skill',
    baseDamage: 8,
    damageType: 'PHYSICAL',
    damageSubType: 'SMASHING_MELEE',
    attackSpeed: 1.2,
    range: 1,
    accuracyCS: 1,
    penetrationMult: 0.5,
    skillRequired: 'Martial_Arts',
    strRequired: 0,
    specialEffects: ['Can block (+1CS defense)'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Specialized',
    notes: 'Defensive melee option',
    emoji: 'üõ°Ô∏è',
  },
  {
    id: 'MEL_011',
    name: 'Spear',
    category: 'Melee_Skill',
    baseDamage: 12,
    damageType: 'PHYSICAL',
    damageSubType: 'PIERCING_MELEE',
    attackSpeed: 2.0,
    range: 3,
    accuracyCS: 0,
    penetrationMult: 1.0,
    skillRequired: 'Spear',
    strRequired: 0,
    specialEffects: ['Longest melee reach', 'Can be thrown'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'Versatile reach weapon',
    emoji: 'üî±',
  },
  {
    id: 'MEL_012',
    name: 'Axe',
    category: 'Melee_Regular',
    baseDamage: 15,
    damageType: 'PHYSICAL',
    damageSubType: 'EDGED_MELEE',
    attackSpeed: 2.5,
    range: 1,
    accuracyCS: -1,
    penetrationMult: 1.0,
    skillRequired: 'None',
    strRequired: 15,
    specialEffects: ['Ignores 5 DR from armor'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Common',
    notes: 'Heavy and powerful',
    emoji: 'ü™ì',
  },
  {
    id: 'MEL_013',
    name: 'Sword',
    category: 'Melee_Skill',
    baseDamage: 12,
    damageType: 'PHYSICAL',
    damageSubType: 'EDGED_MELEE',
    attackSpeed: 1.5,
    range: 2,
    accuracyCS: 0,
    penetrationMult: 1.0,
    skillRequired: 'Swords',
    strRequired: 0,
    specialEffects: ['Balanced attack and defense'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Specialized',
    notes: 'Classic weapon',
    emoji: '‚öîÔ∏è',
  },
  {
    id: 'MEL_014',
    name: 'Dagger',
    category: 'Melee_Regular',
    baseDamage: 8,
    damageType: 'PHYSICAL',
    damageSubType: 'EDGED_MELEE',
    attackSpeed: 0.8,
    range: 1,
    accuracyCS: 1,
    penetrationMult: 0.5,
    skillRequired: 'None',
    strRequired: 0,
    specialEffects: ['Fast', 'Easy to conceal', 'Can be thrown'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'Utility and backup weapon',
    emoji: 'üó°Ô∏è',
  },
  {
    id: 'MEL_015',
    name: 'War Hammer',
    category: 'Melee_Skill',
    baseDamage: 20,
    damageType: 'PHYSICAL',
    damageSubType: 'SMASHING_MELEE',
    attackSpeed: 3.0,
    range: 2,
    accuracyCS: -1,
    penetrationMult: 1.5,
    skillRequired: 'Heavy_Weapons',
    strRequired: 25,
    specialEffects: ['Ignores 10 DR', 'High knockback'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Specialized',
    notes: 'Devastating but slow',
    emoji: 'üî®',
  },
  // NEW MARTIAL ARTS WEAPONS
  {
    id: 'MEL_016',
    name: 'Whip',
    category: 'Melee_Skill',
    baseDamage: 5,
    damageType: 'PHYSICAL',
    damageSubType: 'SMASHING_MELEE',
    attackSpeed: 1.5,
    range: 3,                   // Long reach!
    accuracyCS: -1,
    penetrationMult: 0.1,
    skillRequired: 'Martial_Arts',
    strRequired: 5,
    disarmBonus: 30,            // Excellent for disarming
    entangleCapable: true,      // Can grapple from range
    ...getStunProperties('Melee_Skill', 'SMASHING_MELEE', 'Whip'),
    specialEffects: ['Can disarm at range', 'Can pull enemies', 'Entangle'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Specialized',
    notes: 'Low damage but excellent control',
    emoji: 'ü™¢',
  },
  {
    id: 'MEL_017',
    name: 'Sai',
    category: 'Melee_Skill',
    baseDamage: 8,
    damageType: 'PHYSICAL',
    damageSubType: 'PIERCING_MELEE',
    attackSpeed: 0.9,
    range: 1,
    accuracyCS: 0,
    penetrationMult: 0.8,
    skillRequired: 'Martial_Arts',
    strRequired: 0,
    disarmBonus: 35,            // Designed for trapping/disarming
    ...getStunProperties('Melee_Skill', 'PIERCING_MELEE', 'Sai'),
    specialEffects: ['Sword catcher', '+2CS to parry'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Specialized',
    notes: 'Okinawan weapon, excellent for disarms',
    emoji: 'üî±',
  },
  {
    id: 'MEL_018',
    name: 'Kama',
    category: 'Melee_Skill',
    baseDamage: 10,
    damageType: 'PHYSICAL',
    damageSubType: 'EDGED_MELEE',
    attackSpeed: 1.0,
    range: 1,
    accuracyCS: 0,
    penetrationMult: 0.7,
    skillRequired: 'Martial_Arts',
    strRequired: 0,
    disarmBonus: 20,            // Hook can catch weapons
    ...getStunProperties('Melee_Skill', 'EDGED_MELEE', 'Kama'),
    specialEffects: ['Hook can catch weapons', 'Often used in pairs'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Specialized',
    notes: 'Okinawan farming tool turned weapon',
    emoji: 'üåô',
  },
  {
    id: 'MEL_019',
    name: 'Escrima Sticks',
    category: 'Melee_Skill',
    baseDamage: 7,
    damageType: 'PHYSICAL',
    damageSubType: 'SMASHING_MELEE',
    attackSpeed: 0.7,           // Very fast
    range: 1,
    accuracyCS: 1,
    penetrationMult: 0.3,
    skillRequired: 'Martial_Arts',
    strRequired: 0,
    disarmBonus: 30,            // Eskrima focuses on disarms
    ...getStunProperties('Melee_Skill', 'SMASHING_MELEE', 'Escrima Sticks'),
    specialEffects: ['Fast dual-wield', 'Excellent for disarms', '+1CS with Eskrima style'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'Filipino martial arts weapon',
    emoji: 'ü•¢',
  },
  {
    id: 'MEL_020',
    name: 'Chain',
    category: 'Melee_Skill',
    baseDamage: 6,
    damageType: 'PHYSICAL',
    damageSubType: 'SMASHING_MELEE',
    attackSpeed: 1.3,
    range: 2,
    accuracyCS: -1,
    penetrationMult: 0.2,
    skillRequired: 'Martial_Arts',
    strRequired: 5,
    disarmBonus: 20,
    entangleCapable: true,      // Can wrap around limbs
    ...getStunProperties('Melee_Skill', 'SMASHING_MELEE', 'Chain'),
    specialEffects: ['Can entangle', 'Improvised'],
    costLevel: 'Free',
    costValue: 0,
    availability: 'Common',
    notes: 'Improvised but effective',
    emoji: '‚õìÔ∏è',
  },
  {
    id: 'MEL_021',
    name: 'Balisong',
    category: 'Melee_Skill',
    baseDamage: 8,
    damageType: 'PHYSICAL',
    damageSubType: 'EDGED_MELEE',
    attackSpeed: 0.8,
    range: 1,
    accuracyCS: 1,
    penetrationMult: 0.5,
    skillRequired: 'Martial_Arts',
    strRequired: 0,
    ...getStunProperties('Melee_Skill', 'EDGED_MELEE', 'Balisong'),
    specialEffects: ['Concealed', 'Fast draw', 'Intimidation +1CS'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Restricted',
    notes: 'Filipino butterfly knife',
    emoji: 'ü¶ã',
  },
];

// ==================== RANGED WEAPONS - FIREARMS ====================

export const RANGED_WEAPONS: Weapon[] = [
  {
    id: 'RNG_001',
    name: 'Light Pistol',
    category: 'Ranged_Regular',
    baseDamage: 15,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'GUNFIRE',
    attackSpeed: 1.5,
    range: 20,
    accuracyCS: -2,
    penetrationMult: 1.0,
    skillRequired: 'None',
    strRequired: 0,
    reloadTime: 2,
    magazineSize: 15,
    defaultAmmo: '9mm_Standard',
    specialEffects: ['Easy to conceal', 'Fast draw'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'Compact sidearm',
    emoji: 'üî´',
  },
  {
    id: 'RNG_002',
    name: 'Standard Pistol',
    category: 'Ranged_Regular',
    baseDamage: 20,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'GUNFIRE',
    attackSpeed: 1.5,
    range: 25,
    accuracyCS: -2,
    penetrationMult: 1.0,
    skillRequired: 'None',
    strRequired: 0,
    reloadTime: 2,
    magazineSize: 17,
    defaultAmmo: '9mm_Standard',
    specialEffects: ['Easy to conceal', 'Fast draw'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Common',
    notes: 'Standard law enforcement sidearm',
    emoji: 'üî´',
  },
  {
    id: 'RNG_003',
    name: 'Heavy Pistol',
    category: 'Ranged_Regular',
    baseDamage: 25,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'GUNFIRE',
    attackSpeed: 1.8,
    range: 25,
    accuracyCS: -2,
    penetrationMult: 1.0,
    skillRequired: 'None',
    strRequired: 10,
    reloadTime: 2,
    magazineSize: 8,
    defaultAmmo: '.45_Standard',
    specialEffects: ['Easy to conceal', 'High stopping power'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Common',
    notes: 'High caliber handgun',
    emoji: 'üî´',
  },
  {
    id: 'RNG_004',
    name: 'Revolver',
    category: 'Ranged_Regular',
    baseDamage: 25,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'GUNFIRE',
    attackSpeed: 2.0,
    range: 20,
    accuracyCS: -1,
    penetrationMult: 1.0,
    skillRequired: 'None',
    strRequired: 0,
    reloadTime: 5,
    magazineSize: 6,
    defaultAmmo: '.357_Standard',
    specialEffects: ['Reliable', 'No jams', 'Cylinder reload'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Common',
    notes: 'Classic reliable design',
    emoji: 'üî´',
  },
  {
    id: 'RNG_005',
    name: 'SMG',
    category: 'Ranged_Regular',
    baseDamage: 20,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'GUNFIRE',
    attackSpeed: 1.0,  // Burst fire (was 0.8 - too fast), balanced by -3CS accuracy
    range: 20,
    accuracyCS: -3,    // Heavy penalty for spray-and-pray
    penetrationMult: 0.6,  // 9mm doesn't penetrate well
    skillRequired: 'None',
    strRequired: 0,
    reloadTime: 3,
    magazineSize: 30,
    defaultAmmo: '9mm_Standard',
    specialEffects: ['Fast to draw', 'High rate of fire', 'Burst fire capable'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Restricted',
    notes: 'Submachine gun; burst fire capable',
    emoji: 'üî´',
  },
  {
    id: 'RNG_006',
    name: 'Pump Shotgun',
    category: 'Ranged_Regular',
    baseDamage: 35,
    damageType: 'PHYSICAL',
    damageSubType: 'BUCKSHOT',
    attackSpeed: 3.0,
    range: 5,
    accuracyCS: -3,
    penetrationMult: 0.5,
    skillRequired: 'None',
    strRequired: 10,
    reloadTime: 5,
    magazineSize: 8,
    defaultAmmo: '12ga_Buckshot',
    specialEffects: ['Accuracy penalty reduces with range', 'Spread'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Common',
    notes: 'Close range devastation',
    emoji: 'üí•',
  },
  {
    id: 'RNG_007',
    name: 'Auto Shotgun',
    category: 'Ranged_Skill',
    baseDamage: 35,
    damageType: 'PHYSICAL',
    damageSubType: 'BUCKSHOT',
    attackSpeed: 2.0,
    range: 5,
    accuracyCS: -3,
    penetrationMult: 0.5,
    skillRequired: 'Shooting',
    strRequired: 10,
    reloadTime: 4,
    magazineSize: 8,
    defaultAmmo: '12ga_Buckshot',
    specialEffects: ['Fast follow-up', 'Spread'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Restricted',
    notes: 'Semi-auto shotgun',
    emoji: 'üí•',
  },
  {
    id: 'RNG_008',
    name: 'Slug Shotgun',
    category: 'Ranged_Regular',
    baseDamage: 35,
    damageType: 'PHYSICAL',
    damageSubType: 'SLUG',
    attackSpeed: 3.0,
    range: 15,
    accuracyCS: -2,
    penetrationMult: 1.5,
    skillRequired: 'None',
    strRequired: 10,
    reloadTime: 5,
    magazineSize: 8,
    defaultAmmo: '12ga_Slug',
    specialEffects: ['Single projectile', 'Better range'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Common',
    notes: 'Rifled slug for range',
    emoji: 'üí•',
  },
  {
    id: 'RNG_009',
    name: 'Assault Rifle',
    category: 'Ranged_Skill',
    baseDamage: 30,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'GUNFIRE',
    attackSpeed: 1.5,  // Aimed semi-auto fire (was 0.5 - too fast)
    range: 60,
    accuracyCS: -1,
    penetrationMult: 1.0,
    skillRequired: 'Shooting',
    strRequired: 0,
    reloadTime: 4,
    magazineSize: 30,
    defaultAmmo: '5.56_Standard',
    specialEffects: ['Full-auto capable', 'Versatile'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Military',
    investigationBonus: '+1CS military',
    notes: 'Standard military rifle (5.56mm)',
    emoji: 'üéØ',
  },
  {
    id: 'RNG_010',
    name: 'Battle Rifle',
    category: 'Ranged_Skill',
    baseDamage: 35,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'GUNFIRE',
    attackSpeed: 2.0,
    range: 70,
    accuracyCS: -1,
    penetrationMult: 1.2,
    skillRequired: 'Shooting',
    strRequired: 0,
    reloadTime: 5,
    magazineSize: 20,
    defaultAmmo: '7.62_Standard',
    specialEffects: ['Heavy round', 'Semi-auto'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Military',
    investigationBonus: '+1CS military',
    notes: 'Heavier caliber rifle',
    emoji: 'üéØ',
  },
  {
    id: 'RNG_011',
    name: 'Sniper Rifle',
    category: 'Ranged_Skill',
    baseDamage: 45,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'GUNFIRE',
    attackSpeed: 3.0,
    range: 100,
    accuracyCS: -1,
    penetrationMult: 1.5,
    skillRequired: 'Sniper',
    strRequired: 0,
    reloadTime: 6,
    magazineSize: 10,
    defaultAmmo: '.308_AP',
    specialEffects: ['Can target body parts', 'Ignores some armor'],
    costLevel: 'Very_High',
    costValue: getCostValue('Very_High'),
    availability: 'Military',
    investigationBonus: '+3CS surveillance',
    notes: 'Long range precision',
    emoji: 'üéØ',
  },
  {
    id: 'RNG_012',
    name: 'Anti-Materiel Rifle',
    category: 'Ranged_Skill',
    baseDamage: 60,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'GUNFIRE',
    attackSpeed: 4.0,
    range: 150,
    accuracyCS: 0,
    penetrationMult: 2.5,
    skillRequired: 'Heavy_Weapons',
    strRequired: 20,
    reloadTime: 8,
    magazineSize: 5,
    defaultAmmo: '.50_Tungsten',
    specialEffects: ['Destroys cover', 'Extreme penetration'],
    costLevel: 'Ultra_High',
    costValue: getCostValue('Ultra_High'),
    availability: 'Military_Only',
    investigationBonus: '+2CS anti-vehicle',
    notes: 'Anti-vehicle rifle',
    emoji: 'üíÄ',
  },
  {
    id: 'RNG_013',
    name: 'Machine Gun',
    category: 'Ranged_Skill',
    baseDamage: 30,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'GUNFIRE',
    attackSpeed: 0.2,
    range: 30,
    accuracyCS: -3,
    penetrationMult: 1.0,
    skillRequired: 'Shooting',
    strRequired: 20,
    reloadTime: 6,
    magazineSize: 100,
    defaultAmmo: '7.62_Standard',
    specialEffects: ['Suppression', 'High volume fire'],
    costLevel: 'Very_High',
    costValue: getCostValue('Very_High'),
    availability: 'Military',
    investigationBonus: '+1CS military',
    notes: 'Support weapon',
    emoji: 'üî´',
  },
  {
    id: 'RNG_014',
    name: 'Minigun',
    category: 'Special_Ranged',
    baseDamage: 30,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'GUNFIRE',
    attackSpeed: 0.1,
    range: 20,
    accuracyCS: -4,
    penetrationMult: 1.0,
    skillRequired: 'Heavy_Weapons',
    strRequired: 25,
    reloadTime: 10,
    magazineSize: 500,
    defaultAmmo: '7.62_Standard',
    specialEffects: ['Extreme rate of fire', 'Knockback chance'],
    costLevel: 'Ultra_High',
    costValue: getCostValue('Ultra_High'),
    availability: 'Military_Only',
    notes: 'Vehicle/power armor mounted',
    emoji: '‚ò†Ô∏è',
  },
];

// ==================== THROWN WEAPONS ====================

export const THROWN_WEAPONS: Weapon[] = [
  {
    id: 'THR_001',
    name: 'Throwing Knife',
    category: 'Thrown',
    baseDamage: 10,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'THROWN',
    attackSpeed: 2.0,
    range: 10, // Base, modified by STR
    accuracyCS: -2,
    penetrationMult: 0.5,
    skillRequired: 'None',
    strRequired: 0,
    specialEffects: ['Range adds STR bonus', 'Silent', 'Reusable'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'Silent; reusable',
    emoji: 'üó°Ô∏è',
  },
  {
    id: 'THR_002',
    name: 'Throwing Star',
    category: 'Thrown',
    baseDamage: 8,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'THROWN',
    attackSpeed: 1.5,
    range: 12,
    accuracyCS: -1,
    penetrationMult: 0.25,
    skillRequired: 'Martial_Arts',
    strRequired: 0,
    specialEffects: ['Fast throw', 'Multiple throws per turn'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Specialized',
    notes: 'Ninja weapon',
    emoji: '‚≠ê',
  },
  {
    id: 'THR_003',
    name: 'Javelin',
    category: 'Thrown',
    baseDamage: 15,
    damageType: 'PHYSICAL',
    damageSubType: 'THROWN',
    attackSpeed: 2.5,
    range: 15,
    accuracyCS: -1,
    penetrationMult: 1.0,
    skillRequired: 'Throwing',
    strRequired: 15,
    specialEffects: ['Long range thrown'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'Athletic throw',
    emoji: 'üèπ',
  },
  {
    id: 'THR_004',
    name: 'Rock',
    category: 'Thrown',
    baseDamage: 5,
    damageType: 'PHYSICAL',
    damageSubType: 'THROWN',
    attackSpeed: 1.5,
    range: 8,
    accuracyCS: -2,
    penetrationMult: 0.25,
    skillRequired: 'None',
    strRequired: 0,
    specialEffects: ['Abundant', 'Improvised'],
    costLevel: 'Free',
    costValue: 0,
    availability: 'Abundant',
    notes: 'Basic projectile',
    emoji: 'ü™®',
  },
  {
    id: 'THR_005',
    name: 'Brick',
    category: 'Thrown',
    baseDamage: 8,
    damageType: 'PHYSICAL',
    damageSubType: 'THROWN',
    attackSpeed: 2.0,
    range: 6,
    accuracyCS: -2,
    penetrationMult: 0.5,
    skillRequired: 'None',
    strRequired: 0,
    specialEffects: ['Improvised', 'Causes bleeding'],
    costLevel: 'Free',
    costValue: 0,
    availability: 'Common',
    notes: 'Construction debris',
    emoji: 'üß±',
  },
];

// ==================== SPECIAL RANGED WEAPONS ====================

export const SPECIAL_WEAPONS: Weapon[] = [
  {
    id: 'SPC_001',
    name: 'Compound Bow',
    category: 'Ranged_Skill',
    baseDamage: 15,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'ARROW',
    attackSpeed: 2.0,
    range: 40,
    accuracyCS: 0,
    penetrationMult: 1.0,
    skillRequired: 'Bowmaster',
    strRequired: 15,
    reloadTime: 0,
    specialEffects: ['Special arrows', 'Silent'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Common',
    notes: 'Silent ranged option',
    emoji: 'üèπ',
  },
  {
    id: 'SPC_002',
    name: 'Crossbow',
    category: 'Ranged_Skill',
    baseDamage: 20,
    damageType: 'BLEED_PHYSICAL',
    damageSubType: 'BOLT',
    attackSpeed: 3.0,
    range: 30,
    accuracyCS: -1,
    penetrationMult: 1.5,
    skillRequired: 'Crossbow',
    strRequired: 10,
    reloadTime: 4,
    specialEffects: ['High damage', 'Slow reload'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Common',
    notes: 'Medieval tech; powerful',
    emoji: 'üèπ',
  },
  {
    id: 'SPC_003',
    name: 'Flamethrower',
    category: 'Special_Ranged',
    baseDamage: 0,
    damageType: 'ENERGY',
    damageSubType: 'FIRE',
    attackSpeed: 0.1,
    range: 5,
    accuracyCS: 0,
    penetrationMult: 0.75,
    skillRequired: 'Flamethrower',
    strRequired: 20,
    reloadTime: 10,
    specialEffects: ['Burns targets in cone', 'Ignites area', '15 damage/turn burn'],
    costLevel: 'Very_High',
    costValue: getCostValue('Very_High'),
    availability: 'Military',
    notes: 'Area denial',
    emoji: 'üî•',
  },
  {
    id: 'SPC_004',
    name: 'Rocket Launcher',
    category: 'Special_Ranged',
    baseDamage: 50,
    damageType: 'PHYSICAL',
    damageSubType: 'EXPLOSION',
    attackSpeed: 6.0,
    range: 50,
    accuracyCS: -2,
    penetrationMult: 0.75,
    skillRequired: 'Rocketman',
    strRequired: 20,
    reloadTime: 8,
    magazineSize: 1,
    blastRadius: '3x3',
    specialEffects: ['Area damage', 'High knockback'],
    costLevel: 'Ultra_High',
    costValue: getCostValue('Ultra_High'),
    availability: 'Military_Only',
    notes: 'Explosive; 3x3 blast area',
    emoji: 'üöÄ',
  },
  {
    id: 'SPC_005',
    name: 'Grenade Launcher',
    category: 'Special_Ranged',
    baseDamage: 40,
    damageType: 'PHYSICAL',
    damageSubType: 'EXPLOSION',
    attackSpeed: 3.0,
    range: 40,
    accuracyCS: -2,
    penetrationMult: 0.75,
    skillRequired: 'Rocketman',
    strRequired: 15,
    reloadTime: 3,
    magazineSize: 6,
    specialEffects: ['Area damage'],
    costLevel: 'Very_High',
    costValue: getCostValue('Very_High'),
    availability: 'Military',
    notes: '6-round cylinder',
    emoji: 'üí£',
  },
  {
    id: 'SPC_006',
    name: 'Taser',
    category: 'Special_Ranged',
    baseDamage: 5,
    damageType: 'ENERGY',
    damageSubType: 'ELECTRICAL',
    attackSpeed: 2.0,
    range: 5,
    accuracyCS: -1,
    penetrationMult: 0.25,
    skillRequired: 'None',
    strRequired: 0,
    reloadTime: 3,
    specialEffects: ['Stun effect', 'Non-lethal', 'Stuns for 1d4 turns'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Law_Enforcement',
    notes: 'Stuns for 1d4 turns',
    emoji: '‚ö°',
  },
  {
    id: 'SPC_007',
    name: 'Net Gun',
    category: 'Special_Ranged',
    baseDamage: 0,
    damageType: 'PHYSICAL',
    damageSubType: 'ENTANGLE',
    attackSpeed: 3.0,
    range: 10,
    accuracyCS: -2,
    penetrationMult: 0,
    skillRequired: 'None',
    strRequired: 0,
    reloadTime: 5,
    specialEffects: ['Entangles target', 'Escape DC15', 'Non-lethal'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Specialized',
    notes: 'Non-lethal capture',
    emoji: 'üï∏Ô∏è',
  },
  {
    id: 'SPC_008',
    name: 'Pepper Spray',
    category: 'Special_Ranged',
    baseDamage: 2,
    damageType: 'SPECIAL',
    damageSubType: 'GAS',
    attackSpeed: 1.0,
    range: 2,
    accuracyCS: 1,
    penetrationMult: 0,
    skillRequired: 'None',
    strRequired: 0,
    reloadTime: 0,
    magazineSize: 10,
    ...getStunProperties('Special_Ranged', 'GAS', 'Pepper Spray'),
    specialEffects: ['Blinds target 1d4 turns', '-3CS accuracy while blinded', 'Non-lethal', 'Ignores armor'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'OC spray - causes temporary blindness and pain',
    emoji: 'üå∂Ô∏è',
  },
  {
    id: 'SPC_009',
    name: 'Mace Spray',
    category: 'Special_Ranged',
    baseDamage: 3,
    damageType: 'SPECIAL',
    damageSubType: 'GAS',
    attackSpeed: 1.0,
    range: 3,
    accuracyCS: 1,
    penetrationMult: 0,
    skillRequired: 'None',
    strRequired: 0,
    reloadTime: 0,
    magazineSize: 15,
    ...getStunProperties('Special_Ranged', 'GAS', 'Mace Spray'),
    specialEffects: ['Blinds target 1d6 turns', '-3CS accuracy while blinded', 'Causes coughing', 'Non-lethal', 'Ignores armor'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Law_Enforcement',
    notes: 'CN/CS tear gas spray - stronger than pepper spray',
    emoji: 'üí®',
  },
];

// ==================== ENERGY WEAPONS ====================

export const ENERGY_WEAPONS: Weapon[] = [
  {
    id: 'NRG_001',
    name: 'Laser Rifle',
    category: 'Energy_Weapons',
    baseDamage: 40,
    damageType: 'ENERGY',
    damageSubType: 'LASER',
    attackSpeed: 2.0,
    range: 50,
    accuracyCS: -1,
    penetrationMult: 2.0,
    skillRequired: 'Energy_Weapons',
    strRequired: 0,
    reloadTime: 5,
    magazineSize: 20,
    specialEffects: ['No bullet drop', 'Ignores wind', 'Reflects off mirrors'],
    costLevel: 'Ultra_High',
    costValue: getCostValue('Ultra_High'),
    availability: 'High_Tech',
    investigationBonus: '+2CS technology',
    notes: 'Concentrated light beam',
    emoji: '‚ö°',
  },
  {
    id: 'NRG_002',
    name: 'Plasma Rifle',
    category: 'Energy_Weapons',
    baseDamage: 45,
    damageType: 'ENERGY',
    damageSubType: 'PLASMA',
    attackSpeed: 2.5,
    range: 30,
    accuracyCS: -2,
    penetrationMult: 2.0,
    skillRequired: 'Energy_Weapons',
    strRequired: 0,
    reloadTime: 5,
    magazineSize: 15,
    specialEffects: ['Burns through armor', 'Fire damage over time'],
    costLevel: 'Ultra_High',
    costValue: getCostValue('Ultra_High'),
    availability: 'High_Tech',
    investigationBonus: '+2CS technology',
    notes: 'Superheated matter projectile',
    emoji: 'üî•',
  },
  {
    id: 'NRG_003',
    name: 'Thermal Rifle',
    category: 'Energy_Weapons',
    baseDamage: 35,
    damageType: 'ENERGY',
    damageSubType: 'THERMAL',
    attackSpeed: 2.0,
    range: 50,
    accuracyCS: -1,
    penetrationMult: 1.5,
    skillRequired: 'Energy_Weapons',
    strRequired: 0,
    reloadTime: 5,
    magazineSize: 20,
    specialEffects: ['Heat damage', 'Ignites flammables'],
    costLevel: 'Ultra_High',
    costValue: getCostValue('Ultra_High'),
    availability: 'High_Tech',
    investigationBonus: '+2CS technology',
    notes: 'Heat ray',
    emoji: 'üå°Ô∏è',
  },
  {
    id: 'NRG_004',
    name: 'Ice Rifle',
    category: 'Energy_Weapons',
    baseDamage: 30,
    damageType: 'ENERGY',
    damageSubType: 'ICE',
    attackSpeed: 2.5,
    range: 20,
    accuracyCS: -1,
    penetrationMult: 0.75,
    skillRequired: 'Energy_Weapons',
    strRequired: 0,
    reloadTime: 5,
    magazineSize: 15,
    specialEffects: ['Slows target', 'Can freeze'],
    costLevel: 'Ultra_High',
    costValue: getCostValue('Ultra_High'),
    availability: 'High_Tech',
    investigationBonus: '+2CS technology',
    notes: 'Cryogenic beam',
    emoji: '‚ùÑÔ∏è',
  },
  {
    id: 'NRG_005',
    name: 'Energy Rifle',
    category: 'Energy_Weapons',
    baseDamage: 35,
    damageType: 'ENERGY',
    damageSubType: 'PURE_ENERGY',
    attackSpeed: 2.0,
    range: 40,
    accuracyCS: -2,
    penetrationMult: 1.5,
    skillRequired: 'Energy_Weapons',
    strRequired: 0,
    reloadTime: 5,
    magazineSize: 18,
    specialEffects: ['Pure energy damage', 'Bypasses physical DR'],
    costLevel: 'Ultra_High',
    costValue: getCostValue('Ultra_High'),
    availability: 'High_Tech',
    investigationBonus: '+2CS technology',
    notes: 'Generic energy weapon',
    emoji: '‚ö°',
  },
  {
    id: 'NRG_006',
    name: 'Electric Rifle',
    category: 'Energy_Weapons',
    baseDamage: 30,
    damageType: 'ENERGY',
    damageSubType: 'ELECTRICAL',
    attackSpeed: 1.5,
    range: 30,
    accuracyCS: -2,
    penetrationMult: 1.0,
    skillRequired: 'Energy_Weapons',
    strRequired: 0,
    reloadTime: 5,
    magazineSize: 25,
    specialEffects: ['Chain lightning to conductors', 'Stun chance', '2.0x penetration vs conductive'],
    costLevel: 'Very_High',
    costValue: getCostValue('Very_High'),
    availability: 'High_Tech',
    investigationBonus: '+2CS technology',
    notes: 'Lightning projector',
    emoji: '‚ö°',
  },
  {
    id: 'NRG_007',
    name: 'Sonic Rifle',
    category: 'Energy_Weapons',
    baseDamage: 30,
    damageType: 'PHYSICAL',
    damageSubType: 'SONIC',
    attackSpeed: 2.0,
    range: 70,
    accuracyCS: -1,
    penetrationMult: 0.5,
    skillRequired: 'Shooting',
    strRequired: 0,
    reloadTime: 0,
    specialEffects: ['Ignores physical armor', 'Passes through cover'],
    costLevel: 'Very_High',
    costValue: getCostValue('Very_High'),
    availability: 'High_Tech',
    investigationBonus: '+1CS technology',
    notes: 'Sound wave weapon',
    emoji: 'üì¢',
  },
  {
    id: 'NRG_008',
    name: 'Pulse Rifle',
    category: 'Energy_Weapons',
    baseDamage: 35,
    damageType: 'ENERGY',
    damageSubType: 'CONCUSSIVE',
    attackSpeed: 2.0,
    range: 40,
    accuracyCS: -1,
    penetrationMult: 1.0,
    skillRequired: 'Energy_Weapons',
    strRequired: 0,
    reloadTime: 4,
    magazineSize: 20,
    specialEffects: ['Knockback effect'],
    costLevel: 'Ultra_High',
    costValue: getCostValue('Ultra_High'),
    availability: 'High_Tech',
    investigationBonus: '+2CS technology',
    notes: 'Concussive energy pulse',
    emoji: 'üí´',
  },
  {
    id: 'NRG_009',
    name: 'Disruptor',
    category: 'Energy_Weapons',
    baseDamage: 50,
    damageType: 'ENERGY',
    damageSubType: 'DISINTEGRATION',
    attackSpeed: 3.0,
    range: 20,
    accuracyCS: -2,
    penetrationMult: 3.0,
    skillRequired: 'Energy_Weapons',
    strRequired: 0,
    reloadTime: 8,
    magazineSize: 10,
    specialEffects: ['Ignores all DR', 'Destroys matter'],
    costLevel: 'Ultra_High',
    costValue: getCostValue('Ultra_High'),
    availability: 'Alien_Tech',
    investigationBonus: '+3CS alien tech',
    notes: 'Molecular disruption',
    emoji: '‚ò¢Ô∏è',
  },
  {
    id: 'NRG_010',
    name: 'Stun Rifle',
    category: 'Energy_Weapons',
    baseDamage: 15,
    damageType: 'ENERGY',
    damageSubType: 'STUN',
    attackSpeed: 1.5,
    range: 30,
    accuracyCS: -1,
    penetrationMult: 0.5,
    skillRequired: 'Energy_Weapons',
    strRequired: 0,
    reloadTime: 3,
    magazineSize: 30,
    specialEffects: ['Non-lethal', 'Stuns 1d6 turns'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Law_Enforcement',
    notes: 'Police energy weapon',
    emoji: '‚ö°',
  },
];

// ==================== GRENADES ====================

export const GRENADES: Weapon[] = [
  {
    id: 'GRN_001',
    name: 'Combat Grenade',
    category: 'Grenades',
    baseDamage: 50,
    damageType: 'PHYSICAL',
    damageSubType: 'EXPLOSION',
    attackSpeed: 2.0,
    range: 15,
    accuracyCS: -2,
    penetrationMult: 0.75,
    skillRequired: 'None',
    strRequired: 0,
    blastRadius: '3x3',
    specialEffects: ['Area damage', 'Knockback'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Military',
    notes: 'Fragmentation grenade',
    emoji: 'üí£',
  },
  {
    id: 'GRN_002',
    name: 'Sticky Grenade',
    category: 'Grenades',
    baseDamage: 50,
    damageType: 'PHYSICAL',
    damageSubType: 'EXPLOSION',
    attackSpeed: 2.0,
    range: 15,
    accuracyCS: -2,
    penetrationMult: 0.75,
    skillRequired: 'None',
    strRequired: 0,
    blastRadius: '3x3',
    specialEffects: ['Sticks to first contact', 'Area damage'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Military',
    notes: 'Adheres to targets',
    emoji: 'üí£',
  },
  {
    id: 'GRN_003',
    name: 'Flash Grenade',
    category: 'Grenades',
    baseDamage: 0,
    damageType: 'SPECIAL',
    damageSubType: 'FLASH',
    attackSpeed: 2.0,
    range: 15,
    accuracyCS: -2,
    penetrationMult: 0,
    skillRequired: 'None',
    strRequired: 0,
    blastRadius: '5x5',
    specialEffects: ['Blinds targets', '-4CS for 1d4 turns'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Law_Enforcement',
    notes: 'Non-lethal; flashbang',
    emoji: 'üí°',
  },
  {
    id: 'GRN_004',
    name: 'Stun Grenade',
    category: 'Grenades',
    baseDamage: 0,
    damageType: 'SPECIAL',
    damageSubType: 'CONCUSSIVE',
    attackSpeed: 2.0,
    range: 15,
    accuracyCS: -2,
    penetrationMult: 0,
    skillRequired: 'None',
    strRequired: 0,
    blastRadius: '4x4',
    specialEffects: ['Dazes targets', 'Stun 1d4 turns'],
    costLevel: 'Medium',
    costValue: getCostValue('Medium'),
    availability: 'Law_Enforcement',
    notes: 'Non-lethal; concussion',
    emoji: 'üí´',
  },
  {
    id: 'GRN_005',
    name: 'Smoke Grenade',
    category: 'Grenades',
    baseDamage: 0,
    damageType: 'SPECIAL',
    damageSubType: 'SMOKE',
    attackSpeed: 2.0,
    range: 15,
    accuracyCS: -2,
    penetrationMult: 0,
    skillRequired: 'None',
    strRequired: 0,
    blastRadius: '5x5',
    specialEffects: ['Blocks LOS', '-4CS attacks through smoke'],
    costLevel: 'Low',
    costValue: getCostValue('Low'),
    availability: 'Common',
    notes: 'Concealment',
    emoji: 'üí®',
  },
  {
    id: 'GRN_006',
    name: 'Incendiary Grenade',
    category: 'Grenades',
    baseDamage: 30,
    damageType: 'ENERGY',
    damageSubType: 'FIRE',
    attackSpeed: 2.0,
    range: 15,
    accuracyCS: -2,
    penetrationMult: 1.0,
    skillRequired: 'None',
    strRequired: 0,
    blastRadius: '3x3',
    specialEffects: ['Creates fire area', '15 damage/turn in area'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Military',
    notes: 'Area denial',
    emoji: 'üî•',
  },
  {
    id: 'GRN_007',
    name: 'Gas Grenade',
    category: 'Grenades',
    baseDamage: 0,
    damageType: 'SPECIAL',
    damageSubType: 'GAS',
    attackSpeed: 2.0,
    range: 15,
    accuracyCS: -2,
    penetrationMult: 0,
    skillRequired: 'None',
    strRequired: 0,
    blastRadius: '4x4',
    specialEffects: ['Poison/sleep effect in area'],
    costLevel: 'High',
    costValue: getCostValue('High'),
    availability: 'Military',
    notes: 'Various gas types',
    emoji: '‚ò†Ô∏è',
  },
  {
    id: 'GRN_008',
    name: 'EMP Grenade',
    category: 'Grenades',
    baseDamage: 0,
    damageType: 'SPECIAL',
    damageSubType: 'EMP',
    attackSpeed: 2.0,
    range: 15,
    accuracyCS: -2,
    penetrationMult: 0,
    skillRequired: 'None',
    strRequired: 0,
    blastRadius: '5x5',
    specialEffects: ['Disables electronics', 'Damages robots'],
    costLevel: 'Very_High',
    costValue: getCostValue('Very_High'),
    availability: 'High_Tech',
    notes: 'Anti-tech',
    emoji: '‚ö°',
  },
  {
    id: 'GRN_009',
    name: 'Plasma Grenade',
    category: 'Grenades',
    baseDamage: 60,
    damageType: 'ENERGY',
    damageSubType: 'PLASMA',
    attackSpeed: 2.0,
    range: 15,
    accuracyCS: -2,
    penetrationMult: 1.5,
    skillRequired: 'None',
    strRequired: 0,
    blastRadius: '3x3',
    specialEffects: ['High damage', 'Burns through cover'],
    costLevel: 'Ultra_High',
    costValue: getCostValue('Ultra_High'),
    availability: 'High_Tech',
    notes: 'Advanced explosive',
    emoji: 'üî•',
  },
];

// ==================== STUN PROPERTIES APPLICATION ====================

// Apply stun properties to a weapon based on its type
function applyStunProperties(weapon: Omit<Weapon, 'stunCapable' | 'defaultMode' | 'alwaysLethal' | 'alwaysNonLethal'>): Weapon {
  const stunProps = getStunProperties(weapon.category, weapon.damageSubType, weapon.name);
  return {
    ...weapon,
    ...stunProps,
  } as Weapon;
}

// ==================== COMBINED WEAPON LIST ====================

// Apply stun properties to all weapons
export const ALL_WEAPONS: Weapon[] = [
  ...MELEE_WEAPONS,
  ...RANGED_WEAPONS,
  ...THROWN_WEAPONS,
  ...SPECIAL_WEAPONS,
  ...ENERGY_WEAPONS,
  ...GRENADES,
].map(w => applyStunProperties(w as Omit<Weapon, 'stunCapable' | 'defaultMode' | 'alwaysLethal' | 'alwaysNonLethal'>));

// ==================== UTILITY FUNCTIONS ====================

export function getWeaponById(id: string): Weapon | undefined {
  return ALL_WEAPONS.find(w => w.id === id);
}

export function getWeaponByName(name: string): Weapon | undefined {
  return ALL_WEAPONS.find(w => w.name.toLowerCase() === name.toLowerCase());
}

export function getWeaponsByCategory(category: WeaponCategory): Weapon[] {
  return ALL_WEAPONS.filter(w => w.category === category);
}

export function getWeaponsByAvailability(availability: string): Weapon[] {
  return ALL_WEAPONS.filter(w => w.availability === availability);
}

export function getWeaponsByCostLevel(costLevel: CostLevel): Weapon[] {
  return ALL_WEAPONS.filter(w => w.costLevel === costLevel);
}

export function getAffordableWeapons(budget: number): Weapon[] {
  return ALL_WEAPONS.filter(w => w.costValue <= budget).sort((a, b) => b.baseDamage - a.baseDamage);
}

// Balance check: Calculate DPS
export function calculateDPS(weapon: Weapon): number {
  return weapon.baseDamage / weapon.attackSpeed;
}

// Sort weapons by DPS
export function getWeaponsByDPS(): Weapon[] {
  return [...ALL_WEAPONS].sort((a, b) => calculateDPS(b) - calculateDPS(a));
}

// Get weapon recommendations for a character
export function getRecommendedWeapons(
  budget: number,
  skills: string[],
  str: number
): Weapon[] {
  return ALL_WEAPONS.filter(w => {
    if (w.costValue > budget) return false;
    if (w.strRequired > str) return false;
    if (w.skillRequired !== 'None' && !skills.includes(w.skillRequired)) return false;
    return true;
  }).sort((a, b) => calculateDPS(b) - calculateDPS(a));
}

export default ALL_WEAPONS;
